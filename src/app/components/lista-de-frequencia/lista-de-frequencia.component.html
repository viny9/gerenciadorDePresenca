<div class="mt-4">
  <form [formGroup]="form" class="d-flex flex-column">
    <mat-form-field class="w-50">
      <mat-label>Nome do Professor</mat-label>
      <input type="text" matInput formControlName="nomeDoProfessor">
    </mat-form-field>

    <mat-form-field class="w-50">
      <mat-label>Materia</mat-label>
      <input type="text" placeholder="Adicionar materia" matInput [formControl]="input" [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let materia of materias " [value]="materia">
          {{materia}}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>
</div>

<div *ngIf="!this.form.invalid" class="w-100">
  <table mat-table [dataSource]="alunos" class="mat-elevation-z8 tables w-100">
    <ng-container matColumnDef="numeroDoAluno">
      <th mat-header-cell *matHeaderCellDef class="px-2 border-end text-center">No.</th>
      <td mat-cell *matCellDef="let aluno, let i = index" class="px-2 border-end text-center">{{i + 1}}</td>
    </ng-container>

    <ng-container matColumnDef="nomes">
      <th mat-header-cell *matHeaderCellDef class="px-2 border-end">Nome</th>
      <td mat-cell *matCellDef="let aluno" class="px-2 border-end">{{aluno.nome}}</td>
    </ng-container>

    <ng-container matColumnDef="1">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">1</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="border-end py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)"  (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-3">P</mat-radio-button>
            <mat-radio-button value="F">F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="2">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">2</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="border-end py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)"  (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-3">P</mat-radio-button>
            <mat-radio-button value="F" >F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="3">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">3</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="border-end py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)"  (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-3">P</mat-radio-button>
            <mat-radio-button value="F">F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="4">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">4</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="border-end py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)"  (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-3">P</mat-radio-button>
            <mat-radio-button value="F">F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="5">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">5</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)"  (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-3">P</mat-radio-button>
            <mat-radio-button value="F">F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="6">
      <th mat-header-cell *matHeaderCellDef class="border-end text-center">6</th>
      <td mat-cell *matCellDef="let aluno">
        <div class="border-start py-3">
          <mat-radio-group aria-label="presenca" class="d-flex px-3" color="primary"
           (change)="findAlunoId(aluno.nome)" (change)="presenca(aluno.nome, $event)">
            <mat-radio-button value="P" class="pe-2">P</mat-radio-button>
            <mat-radio-button value="F">F</mat-radio-button>
          </mat-radio-group>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="align-middle"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="align-middle"></tr>
  </table>

  <div class="mt-4">
    <button class="btn btn-danger me-3" routerLink="/turma/{{pathId}}">Fechar</button>
    <button [disabled]="form.invalid" class="btn btn-success" routerLink="/turma/{{pathId}}"
      (click)="addPresenca()">Salvar</button>
  </div>
</div>
